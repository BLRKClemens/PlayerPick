<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<style>
    .Container { 
        position: relative; 
    } 

    .position { 
        position: absolute; 
        top: 570px;
        right: 1650px; 
        width: 150px;
        height: auto;
        opacity: 0;
        transition: all 1s;
    }

    .player{
      position: absolute;
      top: 0;
      right: 0;
      width: 100px;
      height: auto;
      transition: opacity 1s;
    }

    .PlayerContainer{
        position: relative;
        float:left;
    }
</style>
<body>
<div class="Container">
    <img src="FS/Board.png" alt="Board">
    <img src="Players/player-B.png" alt="player a" class="player" id="p_1">
    <img src="Players/player-B.png" alt="player a" class="player" id="p_2">
    <img src="Players/player-B.png" alt="player a" class="player" id="p_3">
    <img src="Players/player-B.png" alt="player a" class="player" id="p_4">
    <img src="Players/player-B.png" alt="player a" class="player" id="p_5">
    <img src="Players/player-B.png" alt="player a" class="player" id="p_6">
    <img src="Players/player-B.png" alt="player a" class="player" id="p_7">
    <img src="Players/player-B.png" alt="player a" class="player" id="p_8">
    <img src="Players/player-B.png" alt="player a" class="player" id="p_9">
    <img src="Players/player-B.png" alt="player a" class="player" id="p_10">


    <img src="Players/player-B.png" alt="player a" class="position" id="pos_1">
    <img src="Players/player-B.png" alt="player a" class="position" id="pos_2">
    <img src="Players/player-B.png" alt="player a" class="position" id="pos_3">
    <img src="Players/player-B.png" alt="player a" class="position" id="pos_4">
    <img src="Players/player-B.png" alt="player a" class="position" id="pos_5">

    <img src="Players/player-A.png" alt="player a" class="position" id="pos_6">
    <img src="Players/player-A.png" alt="player a" class="position" id="pos_7">
    <img src="Players/player-A.png" alt="player a" class="position" id="pos_8">
    <img src="Players/player-A.png" alt="player a" class="position" id="pos_9">
    <img src="Players/player-A.png" alt="player a" class="position" id="pos_10">
</div>

<script type="module">
    import { io } from "https://cdn.socket.io/4.4.1/socket.io.esm.min.js";
    const socket = io();

    

    socket.on('send_data', (data) =>{
        updateBoard(data.positions, data.players);
    });

    function updateBoard(positions, players) {
        document.querySelectorAll('.position').forEach((pos, index) => {
            updatePosition(pos, positions[index]);
        });

        document.querySelectorAll('.player').forEach((player, index) => {
            setPosition(player, 1400-index*120, 0);
            updatePlayer(player, players[index]);
        });
    };

    function updatePosition(position, newPosition){
        setPosition(position, newPosition.right, newPosition. top);
        position.style.width =`${newPosition.width}px`;
        position.style.opacity = newPosition.picked ? 1 : 0;
        position.src = newPosition.player.image_path;
    }

    function updatePlayer(player, newPlayer){
        
        player.src = newPlayer.image_path;
        player.style.opacity = newPlayer.picked ? 0.3 : 1;
    }

    function setPosition(obj, x, y){
        obj.style.right = `${x}px`;
        obj.style.top = `${y}px`;
    }

    
</script>

</body>
</html>